<script src="../tinytest.js"></script>
<script>

function filter(array,callback,configurableThisObj){
  var forEachCallback = callback;

  if (configurableThisObj) {
    forEachCallback = callback.bind(configurableThisObj);
  }

  for (var i = 0; i < array.length; i++) {
    forEachCallback(array[i],i,array);
  }
}

/** Begin Tests **/
 
tests({
  'it should return the cbfn array.length times': function(){
    var counter = 0;
    filter([3,4,5], function(){
      counter++
    })
    eq(counter,3)
  },
  'it should have access to numbers': function () {
    filter([2], function (num) {
      eq(num, 2)
    })
  },
  'it should have access to index': function () {
    filter([3], function (elem, idx) {
      eq(idx, 0)
    })
  },
  'it should have access to array': function () {
    var testArray = [4, 5, 6]
    filter(testArray, function (elem, idx, origArray) {
      eq(testArray, origArray)
    })
  },
  'it should have a config this': function () {
    filter([5], function (elem, idx, origArray) {
      eq(this.description, "config this obj")
    },
      { description: "config this obj" }
    );
  },
  'it should return a new array, not the original one': function () {
    var testArray = [6,7,8]
    filter([5], function (elem, idx, origArray) {
      eq(this.description, "config this obj")
    },
      { description: "config this obj" }
    );
  },
  'it should return a new array with only the elements where cbfn is true': function () {
    filter([5], function (elem, idx, origArray) {
      eq(this.description, "config this obj")
    },
      { description: "config this obj" }
    );
  }
})

 
</script>
